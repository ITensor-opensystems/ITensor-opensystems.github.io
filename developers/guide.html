<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Development guide · ITensorsOpenSystems</title><meta name="title" content="Development guide · ITensorsOpenSystems"/><meta property="og:title" content="Development guide · ITensorsOpenSystems"/><meta property="twitter:title" content="Development guide · ITensorsOpenSystems"/><meta name="description" content="Documentation for ITensorsOpenSystems."/><meta property="og:description" content="Documentation for ITensorsOpenSystems."/><meta property="twitter:description" content="Documentation for ITensorsOpenSystems."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">ITensorsOpenSystems</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Introduction</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorials/tutorial1.html">Open Spin Systems</a></li></ul></li><li><span class="tocitem">Developers</span><ul><li class="is-active"><a class="tocitem" href="guide.html">Development guide</a><ul class="internal"><li><a class="tocitem" href="#Development-environment"><span>Development environment</span></a></li><li><a class="tocitem" href="#Contributing"><span>Contributing</span></a></li></ul></li><li><a class="tocitem" href="code_layout.html">Code layout</a></li><li><a class="tocitem" href="VectorizationCore.html">VectorisationCore</a></li></ul></li><li><span class="tocitem">API Documentation</span><ul><li><a class="tocitem" href="../api/ChainMappings.html">ChainMappings</a></li><li><a class="tocitem" href="../api/GlobalFunctionApproximation.html">GlobalFunctionApproximation</a></li><li><a class="tocitem" href="../api/MatrixConstruction.html">MatrixConsreuction</a></li><li><a class="tocitem" href="../api/QuantumTrajectories.html">QuantumTrajectories</a></li><li><a class="tocitem" href="../api/SplitVectorization.html">SplitVectorization</a></li><li><a class="tocitem" href="../api/Superfermions.html">Superfermions</a></li><li><a class="tocitem" href="../api/Utils.html">Utils</a></li><li><a class="tocitem" href="../api/Vectorization.html">Vectorization</a></li><li><a class="tocitem" href="../api/AnalyticSolutions.html">AnalyticSolutions</a></li><li><a class="tocitem" href="../api/AutoMPOHermitianConjugate.html">AutoMPOHermitianConjugate</a></li><li><a class="tocitem" href="../api/HamiltonianBuilding.html">HamiltonianBuilding</a></li><li><a class="tocitem" href="../api/QuantumTrajectories.html">QuantumTrajectories</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Developers</a></li><li class="is-active"><a href="guide.html">Development guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="guide.html">Development guide</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ITensor-opensystems/OpenSystemsTools.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ITensor-opensystems/OpenSystemsTools.jl/blob/devel/docs/src/developers/guide.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ITensorsOpenSystems.jl-Developer-Guide"><a class="docs-heading-anchor" href="#ITensorsOpenSystems.jl-Developer-Guide">ITensorsOpenSystems.jl Developer Guide</a><a id="ITensorsOpenSystems.jl-Developer-Guide-1"></a><a class="docs-heading-anchor-permalink" href="#ITensorsOpenSystems.jl-Developer-Guide" title="Permalink"></a></h1><p>This guide will help you get setup with all the tools you need to contribute to the development of the package. We&#39;ll assume you have Julia &gt;= 1.9 installed, if you haven&#39;t, please see the <a href="../getting_started/installation.html#installation">installation</a> guide.</p><h2 id="Development-environment"><a class="docs-heading-anchor" href="#Development-environment">Development environment</a><a id="Development-environment-1"></a><a class="docs-heading-anchor-permalink" href="#Development-environment" title="Permalink"></a></h2><h3 id="Clone-the-repo"><a class="docs-heading-anchor" href="#Clone-the-repo">Clone the repo</a><a id="Clone-the-repo-1"></a><a class="docs-heading-anchor-permalink" href="#Clone-the-repo" title="Permalink"></a></h3><p>For this section we&#39;ll assume you&#39;ve been given access to the ITensorsOpenSystems.jl <a href="https://github.com/ITensor-opensystems/ITensorsOpenSystems.jl/">repository</a>.</p><p>First clone the repository</p><pre><code class="language-console hljs">$ git clone git@github.com:ITensor-opensystems/ITensorsOpenSystems.jl.git</code></pre><p>Then move into the package</p><pre><code class="language-console hljs">$ cd ITensorsOpenSystems.jl</code></pre><h3 id="Running-the-tests"><a class="docs-heading-anchor" href="#Running-the-tests">Running the tests</a><a id="Running-the-tests-1"></a><a class="docs-heading-anchor-permalink" href="#Running-the-tests" title="Permalink"></a></h3><p>Now you&#39;re setup you can try running the tests to make sure everthing required is installed and the tests pass on your system</p><p>First we&#39;ll start the Julia REPL, activate the package manager and activate the package</p><pre><code class="language-julia hljs">$ julia
julia&gt; ]
(@v1.10) pkg&gt; activate .
    Activating project at `~/Documents/ITensorsOpenSystems`

(ITensorsOpenSystems) pkg&gt;</code></pre><p>Now you&#39;re ready to run the tests</p><pre><code class="language-julia hljs"> (ITensorsOpenSystems) pkg&gt; test</code></pre><h3 id="Install-in-dev-mode"><a class="docs-heading-anchor" href="#Install-in-dev-mode">Install in dev mode</a><a id="Install-in-dev-mode-1"></a><a class="docs-heading-anchor-permalink" href="#Install-in-dev-mode" title="Permalink"></a></h3><p>As you&#39;ll be modifying a local copy of the package during development you can install the package in dev mode. Make sure your terminal working directory is the root of the ITensorsOpenSystems.jl repository and then run</p><pre><code class="language-console hljs">$ julia
julia&gt; ]
(@v1.10) pkg&gt; dev .</code></pre><h3 id="Pre-commit-(optional)"><a class="docs-heading-anchor" href="#Pre-commit-(optional)">Pre-commit (optional)</a><a id="Pre-commit-(optional)-1"></a><a class="docs-heading-anchor-permalink" href="#Pre-commit-(optional)" title="Permalink"></a></h3><p>We use <a href="https://pre-commit.com/">pre-commit</a> to ensure commits meet the standards we expect. This tool runs some pre-commit hooks to run linting and formatting checks on the changes being made.</p><p>To install the pre-commit hooks run</p><pre><code class="language-console hljs">$ pre-commit install
pre-commit installed at .git/hooks/pre-commit</code></pre><p>On the first commit after install you&#39;ll see messages telling you the pre-commit environment is being initialized, this will only happen once.</p><h4 id="Bypassing-pre-commit"><a class="docs-heading-anchor" href="#Bypassing-pre-commit">Bypassing pre-commit</a><a id="Bypassing-pre-commit-1"></a><a class="docs-heading-anchor-permalink" href="#Bypassing-pre-commit" title="Permalink"></a></h4><p>If you find that pre-commit is causing issues you can bypass the hook by passing the <code>-n</code> flag when making a commit.</p><pre><code class="language-console hljs">$ git commit -n -m &quot;commit message&quot;</code></pre><h3 id="Using-Revise.jl"><a class="docs-heading-anchor" href="#Using-Revise.jl">Using Revise.jl</a><a id="Using-Revise.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Revise.jl" title="Permalink"></a></h3><p>The <a href="https://timholy.github.io/Revise.jl/stable/">Revise.jl</a> package allows changes you&#39;ve made to the source code to become available in you current Julia session. Without Revise you&#39;ll need to restart your Julia session each time you make changes. Install the package using the package manager.</p><pre><code class="language-julia hljs">julia&gt; ]
(v1.10) pkg&gt; add Revise</code></pre><p>When you start a Julia REPL during development the first <code>using</code> statement should be <code>using Revise</code>. This will then enable Revise for the session. Alternatively if you&#39;re on Linux/macOS you can make sure Revise is started at the beginning of each Julia session by running</p><pre><code class="language-console hljs">mkdir -p ~/.julia/config/ &amp;&amp; echo &quot;using Revise&quot; &gt;&gt; ~/.julia/config/startup.jl</code></pre><p>For more information see the <a href="https://timholy.github.io/Revise.jl/stable/config/">documentation</a>.</p><h2 id="Contributing"><a class="docs-heading-anchor" href="#Contributing">Contributing</a><a id="Contributing-1"></a><a class="docs-heading-anchor-permalink" href="#Contributing" title="Permalink"></a></h2><h3 id="Tutorial-driven-development"><a class="docs-heading-anchor" href="#Tutorial-driven-development">Tutorial driven development</a><a id="Tutorial-driven-development-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial-driven-development" title="Permalink"></a></h3><p>As we&#39;ve developed ITensorsOpenSystems.jl we&#39;ve worked with tutorial driven development approach. This means that for each piece of functionality we want to add to the package we first write a tutorial. To do this we write out the function calls we&#39;d like to make and the objects we expect to be returned.</p><p>It doesn&#39;t matter that those functions don&#39;t exist yet, we&#39;ll create them once we&#39;ll finished a first pass of the tutorial. The interface to each function doesn&#39;t have to be perfect on the first pass, write an almost complete tutorial and then start writing the code. As you write the code you&#39;ll realise some of the tutorial will need changing.</p><p>Work in an iterative way, improving the tutorial and code with each iteration. Once you&#39;ve completed the code you&#39;ll have a complete tutorial that covers all of the new functionality. There shouldn&#39;t be any functionality in the project that isn&#39;t covered by a tutorial as users have no way of knowing this functionality exists.</p><p>We&#39;ve tried to organise ITensorsOpenSystems.jl in an easy to understand way. To better understand why the code is organised as it is please first read our <a href="code_layout.html#code_layout">code layout</a> guide. We&#39;ll now cover the process of adding or modifying functionality from start to finish.</p><h3 id="Feature-branches"><a class="docs-heading-anchor" href="#Feature-branches">Feature branches</a><a id="Feature-branches-1"></a><a class="docs-heading-anchor-permalink" href="#Feature-branches" title="Permalink"></a></h3><p>As we develop ITensorsOpenSystems we use feature branches as we develop new functionality. Each piece of work should have a GitHub issue associated with it. This makes it easy to track work and discuss design ideas and track progress of the work. Let&#39;s create a new feature branch for some work described in issue 42.</p><p>We use the <code>devel</code> branch as our development branch, we&#39;ll first check it out and pull any recent changes.</p><pre><code class="language-console hljs">$ git checkout devel
$ git pull</code></pre><p>Now we&#39;re ready to create our branch</p><pre><code class="language-console hljs">$ git checkout -b Iss42/Foo</code></pre><p>Here we&#39;ve created a branch called <code>Iss42/Foo</code>. Starting the branch name with the issue number followed by a couple of descriptive words helps future us and our collaborators understand what&#39;s happening where.</p><p>Now we&#39;ve created the branch make your commits, merging in the devel if the branch is longer lived, this helps prevent complicated merge conflicts further down the line.</p><p>Once you&#39;ve finished the feature open a pull request on the ITensorsOpenSystems.jl repository and request a code review.</p><h3 id="Adding-documentation"><a class="docs-heading-anchor" href="#Adding-documentation">Adding documentation</a><a id="Adding-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-documentation" title="Permalink"></a></h3><p>All our documentation is contained in <a href="https://www.markdownguide.org/">Markdown</a> files in a folder structure expected by Documenter.jl.</p><pre><code class="nohighlight hljs">docs/
    src/
        getting_started/            &lt;- tutorials for users and developers
            installation.md         &lt;- getting ITensorsOpenSystems.jl installed
            ...
        tutorials/                  &lt;- in-depth end-to-end tutorials covering functionality
            tutorial1.md            &lt;- Tutorial covering creating an open quantum system
            ...
        AnalyticSolutions.md        &lt;- API documentation for ChainMappings submodule
        ChainMappings.md            &lt;- API documentation for ChainMappings submodule
        Superfermions.md            &lt;- API documentation for Superfermions submodule
        SplitVectorization.md       &lt;- API documentation for SplitVectorization submodule
        Vectorization.md            &lt;- API documentation for Vectorization submodule
        ...
    .gitignore                      &lt;- tell Git to ignore built documentation
    make.jl                         &lt;- Julia script containing build instructions
    Project.toml                    &lt;- Contains libraries used to create documentation</code></pre><h4 id="Tutorials"><a class="docs-heading-anchor" href="#Tutorials">Tutorials</a><a id="Tutorials-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorials" title="Permalink"></a></h4><p>If you&#39;re adding new functionality, create a new tutorial file in the <code>tutorials</code> folder.</p><h4 id="API-changes"><a class="docs-heading-anchor" href="#API-changes">API changes</a><a id="API-changes-1"></a><a class="docs-heading-anchor-permalink" href="#API-changes" title="Permalink"></a></h4><p>If you&#39;re adding functions or objects that will be exported from the package you&#39;ll need add these to the API documentation in the file for that module. Let&#39;s add a new function to the <code>Superfermions</code> module.</p><pre><code class="nohighlight hljs">Superfermions.rightapply
Superfermions.leftapply
Superfermions.my_new_function
...</code></pre><p>The <code>@docs</code> tag in the Markdown file is part of the syntax used by Documenter.jl when building the documentation. You can read more about that in <a href="https://documenter.juliadocs.org/stable/man/syntax">the documentation</a>.</p><h3 id="Building-the-documentation"><a class="docs-heading-anchor" href="#Building-the-documentation">Building the documentation</a><a id="Building-the-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Building-the-documentation" title="Permalink"></a></h3><h4 id="Updating-make.jl"><a class="docs-heading-anchor" href="#Updating-make.jl">Updating <code>make.jl</code></a><a id="Updating-make.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Updating-make.jl" title="Permalink"></a></h4><p>If you&#39;ve added any new files to the documentation you&#39;ll need to update the <code>makedocs</code> call in the <code>make.jl</code> file. This tells Documenter where to look for the API documentation and tutorials.</p><p>For example, to make Documenter.jl aware of a new tutorial you&#39;ll need to add it to the <code>Tutorials</code> section. Note that here we use <code>...</code> to denote lines in the file not shown here.</p><pre><code class="language-julia hljs">...

makedocs(
    sitename = &quot;ITensorsOpenSystems&quot;,
    format = Documenter.HTML(prettyurls = get(ENV, &quot;CI&quot;, nothing) == &quot;true&quot;),
    modules = [ITensorsOpenSystems],
    pages = Any[
        &quot;Introduction&quot; =&gt; &quot;index.md&quot;,
        &quot;API&quot; =&gt; [
            &quot;AnalyticSolutions&quot; =&gt; &quot;AnalyticSolutions.md&quot;,
            &quot;GlobalFunctionApproximation&quot; =&gt; &quot;GlobalFunctionApproximation.md&quot;,
            ...
        ],
        &quot;Tutorials&quot; =&gt; [
            &quot;Open Spin Systems&quot; =&gt; &quot;tutorials/tutorial1.md&quot;,
            &quot;My new tutorial&quot; =&gt; &quot;tutorials/my_tutorial.md&quot;,
        ]],
)

...
</code></pre><h4 id="Build"><a class="docs-heading-anchor" href="#Build">Build</a><a id="Build-1"></a><a class="docs-heading-anchor-permalink" href="#Build" title="Permalink"></a></h4><p>We&#39;re now ready to build the documentation. Ensure your terminal working directory is the <code>docs</code> folder and then run</p><pre><code class="language-console hljs">$ julia --project make.jl</code></pre><p>This will build the documentation HTML files and write these to a <code>build</code> folder. Once it&#39;s finished you can open the documentation at <code>build/index.html</code>.</p><h4 id="Dealing-with-errors"><a class="docs-heading-anchor" href="#Dealing-with-errors">Dealing with errors</a><a id="Dealing-with-errors-1"></a><a class="docs-heading-anchor-permalink" href="#Dealing-with-errors" title="Permalink"></a></h4><p>You may encounter errors such as</p><pre><code class="language-julia hljs">[ Info: SetupBuildDirectory: setting up build directory.
[ Info: Doctest: running doctests.
[ Info: ExpandTemplates: expanding markdown templates.
[ Info: CrossReferences: building cross-references.
[ Info: CheckDocument: running document checks.
┌ Error: 1 docstring not included in the manual:
│
│     ITensorsOpenSystems.MatrixConstruction.new_function :: Tuple{Any}
│
│ These are docstrings in the checked modules (configured with the modules keyword)
│ that are not included in canonical @docs or @autodocs blocks.
└ @ Documenter ~/.julia/packages/Documenter/2OZOh/src/utilities/utilities.jl:44</code></pre><p>This means we&#39;ve forgotten to add the <code>MatrixConstruction.new_function</code> function to the list of functions in the <code>MatrixConstruction.md</code> API documentation file.</p><h3 id="Writing-tests"><a class="docs-heading-anchor" href="#Writing-tests">Writing tests</a><a id="Writing-tests-1"></a><a class="docs-heading-anchor-permalink" href="#Writing-tests" title="Permalink"></a></h3><p>We need to make sure that each function we add to the package behaves as we expect it to. We use the <a href="https://github.com/JuliaTesting/ReTestItems.jl"><code>ReTestItems.jl</code></a> package to run our tests. See their documentation for information on how to write tests using that framework.</p><h3 id="Pull-request-and-code-review"><a class="docs-heading-anchor" href="#Pull-request-and-code-review">Pull request and code review</a><a id="Pull-request-and-code-review-1"></a><a class="docs-heading-anchor-permalink" href="#Pull-request-and-code-review" title="Permalink"></a></h3><p>GitHub allows use to easily review code that&#39;s being added to the project. We&#39;ve setup the repository to only allow merging of changes if they&#39;ve passed a code review and have been given approval by a maintainer. This is an important process to ensure that</p><ul><li>code is understood by others</li><li>code adheres to the standards expected</li><li>code is well documented</li></ul><p>This isn&#39;t meant to be a hurdle to contributing, it helps everyone better understand new features.</p><h4 id="GitHub-Actions-CI/CD"><a class="docs-heading-anchor" href="#GitHub-Actions-CI/CD">GitHub Actions CI/CD</a><a id="GitHub-Actions-CI/CD-1"></a><a class="docs-heading-anchor-permalink" href="#GitHub-Actions-CI/CD" title="Permalink"></a></h4><p>As part of the pull request the GitHub Actions runners will run some checks to make sure the code meets the standards we expect and that all the tests pass. See the results of our GitHub Actions runners <a href="https://github.com/ITensor-opensystems/ITensorsOpenSystems.jl/actions">here</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorials/tutorial1.html">« Open Spin Systems</a><a class="docs-footer-nextpage" href="code_layout.html">Code layout »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Wednesday 13 November 2024 09:24">Wednesday 13 November 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
